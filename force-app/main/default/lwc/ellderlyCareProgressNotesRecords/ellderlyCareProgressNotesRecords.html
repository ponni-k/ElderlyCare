<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 08-30-2023
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <div class="slds-p-around_small">
        <div class="slds-box slds-box_x-small" style="background-color: white !important;">
            <div class="container">
                <div class="headingcontent">
                    <h1 class="heading">Reports For Progress Notes</h1>
                </div>
                <div class="slds-grid slds-gutters slds-p-around_medium">
                    <div class="slds-col">
                        <lightning-input type="search" label="Services" placeholder="Search..." value={serviceName} onchange={handleServiceChange} required></lightning-input>
                        <!-- <button class="custom-clear-button" onclick={handleClearClick}>
                            <lightning-icon icon-name="utility:clear" size="small"></lightning-icon>
                        </button> -->
                        <div if:true={showDropdown} class="search-results slds-dropdown slds-dropdown_length-with-icon-7">
                            <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                                <template for:each={serviceItemRecords} for:item="suggestion">
                                    <li
                                        key={suggestion.Id}
                                        role="presentation"
                                        class="slds-listbox__item"
                                        onclick={handleSuggestionClick}>
                                        <div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small">
                                            <span class="slds-media__body">
                                                <span class="slds-truncate" title={suggestion.Name}>{suggestion.Name}</span>
                                            </span>
                                        </div>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                    <div class="slds-col">
                        <c-custom-lookup-lwc icon-name="standard:user" data-name="carrerid" s-object-api-name="Carer__c" label="Carer" class="Carer" value={selectedrecord} onlookupupdate={handleCarerChange} placeholder="Search Carer here..."></c-custom-lookup-lwc>
                    </div>
                    <div class="slds-col">
                        <c-custom-lookup-lwc icon-name="standard:user" data-name="clientid" s-object-api-name="Account" label="Client" class="Client"  value={selectedClientrecord} onlookupupdate={handleClientChange} placeholder="Search Client here..." onblur={handleClientChange}></c-custom-lookup-lwc>
                    </div>
                    <!-- <div class="slds-col">
                        <c-custom-lookup-lwc icon-name="standard:user" data-name="clientid" s-object-api-name="Product_Line_Item__c" label="Services" class="Client" onlookupupdate={handleServiceChange} placeholder="Search Client here..." onactive={getTickets}></c-custom-lookup-lwc>
                    </div> -->
                    <div class="slds-col">
                        <lightning-input type="date" name="input1" data-name="startDate" label="Start Date" value={startDate} onchange={handleStartDate} ></lightning-input>
                    </div>
                    <div class="slds-col">
                        <lightning-input type="date" name="input1" data-name="endDate" label="End Date" value={endDate} onchange={handleEndDate}></lightning-input>
                        <p class="error-message">{errorMessage}</p>
                    </div>
                    <div class="slds-m-top_large">
                        <lightning-button variant="brand" label="Get Result" title="Primary action" onclick={handleGetRecords} class="slds-m-left_x-small" disabled={isDisableGetRecords}></lightning-button>
                    </div>
                    <div class="slds-m-top_large">
                        <lightning-button icon-name="utility:download" variant="destructive" label="Reports" title="Destructive action" onclick={handleDownloadReports} disabled={disableDownLoadBtn} class="slds-m-left_x-small"></lightning-button>
                    </div>
                </div>
            </div>
            <template if:true={isRecords}>
                <lightning-datatable
                    key-field="Id"
                    data={data}
                    columns={columns}>
                </lightning-datatable>
            </template>
            <template if:true={isNoRecords}>
                <div class="norecords">
                    <div class="Headingnorecords">
                        <h1>No Records Found....</h1>
                    </div>
                </div>
            </template>
            <!-- <div style="padding:10px">
                <table>
                    <tr class="headingcontent">
                        <th>Carer</th>
                        <th>Client</th>
                        <th>Progress Date</th>
                        <th>Services</th>
                        <th>Service Description</th>
                    </tr>
                    <template for:each={data} for:item="thisData">
                        <tr key={thisData.id}>
                            <td>{thisData.Carer__r.Name}  </td>
                            <td>{thisData.Client__r.Name} </td>
                            <td>{thisData.Progress_Date__c} </td>
                            <td>{thisData.Service_Items__r.Name}</td>
                            <td>{thisData.Service_Description__c}</td>
                        </tr>
                    </template>
                </table>
            </div> -->
            <div class="slds-align_absolute-center slds-m-around_xx-small">
                <lightning-button label="Previous" variant="destructive-text" icon-name="utility:chevronleft" onclick={previousHandler}
                    disabled={isPreviousDisable}>
                </lightning-button>
                <span class="slds-badge slds-badge_lightest"
                            style="margin-right: 10px;margin-left: 10px;">
                        Displaying {startingRecord} to {endingRecord} of {totalRecountCount} records.
                        Page {page} of {totalPage}.
                        </span>
                <lightning-button label="Next" variant="brand-outline" icon-name="utility:chevronright" icon-position="right" onclick={nextHandler}
                    disabled={isNextDisable}>
                </lightning-button>
            </div>
        </div>
    </div>
</template>